@model RegisterViewModel

<link rel="stylesheet" href="~/css/register.css" />

<div class="form-wrapper">
    <div class="spinner-container" id="spinner">
        <div class="spinner">
            <div></div><div></div><div></div><div></div><div></div><div></div>
        </div>
    </div>

    <form asp-action="Register" method="post" id="registerForm">
        <h2>Register</h2>

        @if (ViewBag.SuccessMessage != null)
        {
            <div class="alert-success">@ViewBag.SuccessMessage</div>
            <script>
                setTimeout(() => {
                    window.location.href = '/Account/Login';
                }, 1500);
            </script>
        }

        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        <div class="input-group">
            <input asp-for="FullName" class="input" required autocomplete="off" />
            <label class="user-label">Full Name</label>
            <span asp-validation-for="FullName" class="text-danger"></span>
        </div>

        <div class="input-group">
            <input asp-for="DateOfBirth" type="date" class="input" required />
            <label class="user-label">Date of Birth</label>
            <span asp-validation-for="DateOfBirth" class="text-danger"></span>
        </div>

        <div class="input-group">
            <input asp-for="CellPhone" class="input" required autocomplete="off" />
            <label class="user-label">Cell Phone</label>
            <span asp-validation-for="CellPhone" class="text-danger"></span>
        </div>

        <div class="input-group">
            <input asp-for="Email" class="input" required autocomplete="off" />
            <label class="user-label">Email</label>
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>

        <div class="input-group">
            <input asp-for="Password" type="password" class="input" required />
            <label class="user-label">Password</label>
            <span asp-validation-for="Password" class="text-danger"></span>
        </div>

        <div class="input-group">
            <select asp-for="Role" class="input" required>
                <option disabled selected value="">-- Select Role --</option>
                <option>Farmer</option>
                <option>Employee</option>
            </select>
            <label class="user-label">Role</label>
            <span asp-validation-for="Role" class="text-danger"></span>
        </div>

        <div class="button-group">
            <button type="submit" class="btn-primary">Register</button>
            <a href="~/Home/Index" class="btn-secondary">Cancel</a>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        const form = document.getElementById('registerForm');
        const spinner = document.getElementById('spinner');

        form.addEventListener('submit', function () {
            spinner.style.display = 'block';
        });
    </script>
}
